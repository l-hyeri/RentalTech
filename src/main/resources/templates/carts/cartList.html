<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:inline="javascript">

    // 전체 선택, 전체 해제
    function checkAll() {
        if ($("#checkall").prop("checked")) {
            $("input[name=cartChkBox]").prop("checked", true);
        } else {
            $("input[name=cartChkBox]").prop("checked", false);
        }
    }
</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>RentalTech</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/>
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link rel="stylesheet" href="/css/styles.css">
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="/js/scripts.js"></script>
</head>

<body>
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container px-4 px-lg-5">
        <a class="navbar-brand" href="/userHome">RentalTech</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span
                class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                <li class="nav-item"><a class="nav-link active" aria-current="page" href="/userHoem">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="/members/editMember">회원정보 수정</a></li>
                <li class="nav-item"><a class="nav-link" href="#!">마이페이지</a></li>
                <li class="nav-item"><a class="nav-link" href="#!">문의사항</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">Shop</a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">제품</a></li>
                        <li>
                            <hr class="dropdown-divider"/>
                        </li>
                        <li><a class="dropdown-item" href="#!">TV</a></li>
                        <li><a class="dropdown-item" href="#!">AirConditional</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- Header-->
<header class="bg-dark py-5">
    <div class="container px-4 px-lg-5 my-5">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bolder">Rent Your Tech</h1>
            <p class="lead fw-normal text-white-50 mb-0">Elevate your lifestyle with our premium electronics rental
                service</p>
        </div>
    </div>
</header>
<!-- Section-->
<section class="py-5 main-form-container content-mg">
    <h2 class="mb-4">
        장바구니 목록
    </h2>
    <div>
        <table class="table">
            <colgroup>
                <col width="25%"/>
                <col width="80%"/>
                <col width="25%"/>
            </colgroup>
            <thead class="thead-dark">
            <tr class="text-center">
                <td>
                    <input type="checkbox" id="checkall" onclick="checkAll()"> 전체선택
                </td>
                <td class="w-45 text-nowrap">상품정보</td>
                <td class="w-25 text-nowrap">상품금액</td>
            </tr>
            </thead>
            <tbody>
            <tr th:each="cartList : ${cartList}">
                <td class="text-center align-middle">
                    <input type="checkbox" name="cartChkBox" th:value="${cartList.cartItemId}">
                </td>
                <td class="d-flex">
                    <div class="align-self-center">
                        <img th:src="${cartList.imgUrl}" class="rounded repImg" th:alt="${cartList.item_name}">
                    </div>
                    <div class="align-self-center">
                        <span th:text="${cartList.item_name}" class="fs24 font-weight-bold m-3"></span>
                        <div class="fs18 font-weight-light m-3">
                            <span class="input-group mt-2">
                                <span th:id="'price_' + ${cartList.cartItemId}"
                                      th:data-price="${cartList.price}"
                                      th:text="${cartList.price} + '원'" class="align-self-center mr-3">
                                </span>
                                <input type="number" name="count" th:id="'count_' + ${cartList.cartItemId}"
                                       th:value="${cartList.count}" min="1"
                                       onchange="changeCount(this)" class="form-control mr-2">
                                <button type="button" class="close" aria-label="Close">
                                    <span aria-hidden="true" th:data-id="${cartList.cartItemId}"
                                          onclick="deleteCartItem(this)">&times;</span>
                                </button>
                            </span>
                        </div>
                    </div>
                </td>
                <td class="text-center align-middle">
                    <span th:id="'totalPrice_' + ${cartList.cartItemId}"
                          name="totalPrice" th:text="${cartList.price * cartList.count} + '원'">
                    </span>
                </td>
            </tr>
            </tbody>
        </table>

        <h4 class="text-center">
            총 주문 금액 : <span id="orderTotalPrice" class="text-danger">0원</span>
        </h4>

        <div class="text-center mt-3">
            <button type="button" class="btn btn-primary btn-lg" onclick="orders()">주문하기</button>
        </div>

    </div>
</section>

<!-- Footer-->
<footer class="py-5 bg-dark">
    <div class="container"><p class="m-0 text-center text-white">Copyright &copy; RentalTech 2024</p></div>
</footer>
</body>
</html>